<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Voor jou ğŸ’–</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;900&family=Pacifico&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg1:#0b1020;
      --bg2:#1a0f2b;
      --card: rgba(255,255,255,0.08);
      --stroke: rgba(255,255,255,0.14);
      --text: rgba(255,255,255,0.92);
      --muted: rgba(255,255,255,0.75);
      --pink:#ff4d8d;
      --rose:#ff7ab6;
      --violet:#7c4dff;
      --gold:#ffd36e;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: "Nunito", system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      color:var(--text);
      min-height:100vh;
      background:
        radial-gradient(1200px 800px at 20% 15%, rgba(255,77,141,0.25), transparent 55%),
        radial-gradient(900px 700px at 80% 20%, rgba(124,77,255,0.25), transparent 55%),
        radial-gradient(800px 700px at 50% 90%, rgba(255,211,110,0.18), transparent 60%),
        linear-gradient(180deg, var(--bg1), var(--bg2));
      overflow-x:hidden;
    }

    /* floating hearts */
    .hearts{position:fixed; inset:0; pointer-events:none; overflow:hidden;}
    .heart{
      position:absolute;
      width:14px; height:14px;
      transform: rotate(45deg);
      opacity:0.22;
      animation: floatUp linear infinite;
      filter: drop-shadow(0 8px 14px rgba(0,0,0,0.35));
    }
    .heart:before, .heart:after{
      content:"";
      position:absolute;
      width:14px; height:14px;
      border-radius:50%;
      background: var(--rose);
    }
    .heart{ background: var(--rose); }
    .heart:before{ left:-7px; top:0; }
    .heart:after{ left:0; top:-7px; }
    @keyframes floatUp{
      from{ transform: translateY(110vh) rotate(45deg); }
      to{ transform: translateY(-20vh) rotate(45deg); }
    }

    .wrap{
      max-width: 980px;
      margin: 0 auto;
      padding: 28px 18px 70px;
      position:relative;
    }

    header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:16px;
      padding: 18px 18px;
      background: rgba(255,255,255,0.06);
      border: 1px solid var(--stroke);
      border-radius: 18px;
      backdrop-filter: blur(10px);
      box-shadow: 0 16px 60px rgba(0,0,0,0.35);
    }

    .brand{
      display:flex; align-items:center; gap:12px;
    }
    .badge{
      width:44px; height:44px;
      border-radius:14px;
      background:
        radial-gradient(circle at 30% 30%, rgba(255,255,255,0.45), transparent 45%),
        linear-gradient(135deg, rgba(255,77,141,0.9), rgba(124,77,255,0.85));
      border:1px solid rgba(255,255,255,0.25);
      box-shadow: 0 10px 30px rgba(255,77,141,0.22);
      display:grid; place-items:center;
      font-size:20px;
    }
    .brand h1{
      margin:0;
      font-family:"Pacifico", cursive;
      font-weight:400;
      font-size: 22px;
      letter-spacing:0.2px;
    }
    .brand p{ margin:0; color:var(--muted); font-size:13px; }

    nav{
      display:flex; gap:10px; flex-wrap:wrap; justify-content:flex-end;
    }
    .pill{
      padding: 10px 12px;
      border-radius: 999px;
      background: rgba(255,255,255,0.06);
      border: 1px solid rgba(255,255,255,0.12);
      color: var(--text);
      text-decoration:none;
      font-weight:700;
      font-size:13px;
      transition: transform .15s ease, background .2s ease;
      user-select:none;
    }
    .pill:hover{ transform: translateY(-1px); background: rgba(255,255,255,0.10); }

    .hero{
      margin-top: 22px;
      padding: 26px 18px;
      border-radius: 22px;
      border: 1px solid var(--stroke);
      background: linear-gradient(135deg, rgba(255,77,141,0.16), rgba(124,77,255,0.10));
      box-shadow: 0 18px 70px rgba(0,0,0,0.38);
      position:relative;
      overflow:hidden;
    }

    .hero:before{
      content:"";
      position:absolute; inset:-2px;
      background: radial-gradient(500px 220px at 15% 10%, rgba(255,255,255,0.18), transparent 55%);
      pointer-events:none;
    }

    .grid{
      display:grid;
      grid-template-columns: 1.15fr .85fr;
      gap:16px;
      align-items:stretch;
    }
    @media (max-width: 860px){
      .grid{ grid-template-columns: 1fr; }
      nav{ justify-content:flex-start; }
    }

    .card{
      padding: 18px;
      border-radius: 20px;
      background: var(--card);
      border: 1px solid rgba(255,255,255,0.12);
      backdrop-filter: blur(10px);
    }

    .title{
      font-size: clamp(24px, 3.6vw, 44px);
      line-height:1.05;
      margin: 4px 0 10px;
      font-weight: 900;
      letter-spacing: -0.5px;
    }

    .subtitle{
      margin: 0 0 14px;
      color: var(--muted);
      font-size: 15px;
    }

    .chiprow{ display:flex; flex-wrap:wrap; gap:10px; margin-top: 12px; }
    .chip{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 10px 12px;
      border-radius: 14px;
      background: rgba(255,255,255,0.06);
      border: 1px solid rgba(255,255,255,0.12);
      font-weight: 700;
      font-size: 13px;
    }
    .dot{
      width:10px; height:10px; border-radius:50%;
      background: var(--rose);
      box-shadow: 0 0 0 6px rgba(255,122,182,0.14);
    }

    .bigbtns{ display:flex; gap:12px; flex-wrap:wrap; margin-top:14px; }
    button{
      border:0;
      cursor:pointer;
      font-family: inherit;
    }
    .btn{
      padding: 12px 14px;
      border-radius: 14px;
      font-weight: 900;
      font-size: 14px;
      letter-spacing: 0.2px;
      transition: transform .12s ease, filter .2s ease, background .2s ease;
      user-select:none;
    }
    .btn:active{ transform: translateY(1px) scale(0.99); }
    .btn-primary{
      background: linear-gradient(135deg, var(--pink), var(--violet));
      color: white;
      box-shadow: 0 14px 40px rgba(255,77,141,0.22);
    }
    .btn-primary:hover{ filter: brightness(1.05); transform: translateY(-1px); }
    .btn-soft{
      background: rgba(255,255,255,0.08);
      border: 1px solid rgba(255,255,255,0.14);
      color: var(--text);
    }
    .btn-soft:hover{ background: rgba(255,255,255,0.12); transform: translateY(-1px); }

    .mini{
      display:grid;
      gap:12px;
    }
    .mini h3{ margin:0; font-size:16px; letter-spacing:-0.2px; }
    .mini p{ margin:0; color: var(--muted); font-size:14px; line-height:1.4; }

    .list{
      margin: 12px 0 0;
      padding:0;
      list-style:none;
      display:grid;
      gap:10px;
    }
    .li{
      padding: 12px 12px;
      border-radius: 16px;
      background: rgba(0,0,0,0.16);
      border: 1px solid rgba(255,255,255,0.10);
      display:flex;
      gap:10px;
      align-items:flex-start;
    }
    .emoji{ font-size:18px; margin-top:1px; }
    .li strong{ display:block; font-size:14px; }
    .li span{ color: var(--muted); font-size: 13px; }

    .section{
      margin-top: 16px;
      display:grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap: 12px;
    }
    @media (max-width: 860px){ .section{ grid-template-columns: 1fr; } }

    .footer{
      margin-top: 22px;
      text-align:center;
      color: rgba(255,255,255,0.62);
      font-size: 13px;
      padding: 18px 0 0;
    }
    .smallnote{
      margin-top:10px;
      text-align:center;
      font-size:12px;
      color: rgba(255,255,255,0.55);
    }

    /* modal */
    .modal{
      position: fixed; inset:0;
      display:none;
      align-items:center;
      justify-content:center;
      padding: 18px;
      background: rgba(0,0,0,0.55);
      backdrop-filter: blur(6px);
      z-index: 50;
    }
    .modal.open{ display:flex; }
    .modalbox{
      width: min(720px, 100%);
      border-radius: 20px;
      background: rgba(20,16,30,0.92);
      border: 1px solid rgba(255,255,255,0.16);
      box-shadow: 0 24px 90px rgba(0,0,0,0.65);
      padding: 18px;
      position:relative;
    }
    .modalbox h2{ margin: 0 0 8px; font-size: 20px; }
    .modalbox p{ margin: 0 0 12px; color: var(--muted); }
    .close{
      position:absolute; right:12px; top:12px;
      width:38px; height:38px;
      border-radius: 12px;
      background: rgba(255,255,255,0.08);
      border: 1px solid rgba(255,255,255,0.14);
      color: var(--text);
      font-weight:900;
    }
    .close:hover{ background: rgba(255,255,255,0.12); }

    .confetti{
      position:fixed; inset:0; pointer-events:none; display:none; z-index:60;
    }
    .confetti.show{ display:block; }

    /* tiny toast */
    .toast{
      position: fixed;
      left: 50%;
      transform: translateX(-50%);
      bottom: 18px;
      background: rgba(255,255,255,0.10);
      border: 1px solid rgba(255,255,255,0.16);
      backdrop-filter: blur(10px);
      padding: 10px 12px;
      border-radius: 14px;
      color: var(--text);
      font-weight: 800;
      font-size: 13px;
      display:none;
      z-index:70;
      box-shadow: 0 12px 35px rgba(0,0,0,0.45);
    }
    .toast.show{ display:block; }
    a { color: inherit; }
  </style>
</head>

<body>
  <div class="hearts" id="hearts"></div>
  <canvas class="confetti" id="confetti"></canvas>
  <div class="toast" id="toast">ğŸ’–</div>

  <div class="wrap">
    <header>
      <div class="brand">
        <div class="badge">ğŸ’Œ</div>
        <div>
          <h1>Voor jou</h1>
          <p>Een mini-website met maxi-liefde âœ¨</p>
        </div>
      </div>

      <nav>
        <a class="pill" href="#liefdesbrief">ğŸ’– Liefdesbrief</a>
        <a class="pill" href="#date">ğŸ“ Date</a>
        <a class="pill" href="#quiz">ğŸ€ Quiz</a>
        <a class="pill" href="#vraag">ğŸ’ De vraag</a>
      </nav>
    </header>

    <div class="hero">
      <div class="grid">
        <div class="card" id="liefdesbrief">
          <div class="title">Hey <span id="naam">liefste</span> ğŸ’—</div>
          <p class="subtitle">
            Ik heb dit voor jou gemaakt omdat jij mijn favoriete persoon bent. Altijd.
          </p>

          <div class="chiprow">
            <div class="chip"><span class="dot"></span> Jij + ik = mijn geluk</div>
            <div class="chip"><span class="dot" style="background:var(--gold); box-shadow:0 0 0 6px rgba(255,211,110,0.14)"></span> Extra knuffels inbegrepen</div>
            <div class="chip"><span class="dot" style="background:var(--violet); box-shadow:0 0 0 6px rgba(124,77,255,0.14)"></span> Onbeperkte kusjes</div>
          </div>

          <div class="bigbtns">
            <button class="btn btn-primary" id="btnOpen">ğŸ“© Open je geheime brief</button>
            <button class="btn btn-soft" id="btnCompliment">âœ¨ Geef me een compliment</button>
          </div>

          <p class="smallnote">
            Tip: pas de tekst onderaan aan met jullie inside jokes ğŸ˜„
          </p>
        </div>

        <div class="card mini" id="date">
          <h3>ğŸ“ Date-plan (jij kiest)</h3>
          <p>Klik en verzamel punten. Hoe meer punten, hoe meer â€œjaâ€ je krijgt ğŸ˜Œ</p>

          <ul class="list" id="dateList">
            <li class="li" data-points="2">
              <div class="emoji">ğŸ•¯ï¸</div>
              <div><strong>Kaarslicht & cozy avond</strong><span>dekentje + film + snacks</span></div>
            </li>
            <li class="li" data-points="3">
              <div class="emoji">ğŸ</div>
              <div><strong>Favoriete eten (jij beslist)</strong><span>ik betaal / ik kook / ik regel</span></div>
            </li>
            <li class="li" data-points="2">
              <div class="emoji">ğŸŒ†</div>
              <div><strong>Avondwandeling</strong><span>hand in hand, zonder haast</span></div>
            </li>
            <li class="li" data-points="4">
              <div class="emoji">ğŸ¡</div>
              <div><strong>Mini-avontuur</strong><span>iets nieuws samen proberen</span></div>
            </li>
          </ul>

          <div class="chiprow" style="margin-top:12px">
            <div class="chip">â­ Score: <span id="score">0</span></div>
            <div class="chip">ğŸ¯ Doel: <span id="goal">7</span></div>
          </div>

          <div class="bigbtns" style="margin-top:12px">
            <button class="btn btn-soft" id="btnReset">â†©ï¸ Reset</button>
            <button class="btn btn-primary" id="btnLock">ğŸ”’ Plan vastleggen</button>
          </div>
        </div>
      </div>

      <div class="section">
        <div class="card" id="quiz">
          <h3 style="margin:0 0 8px">ğŸ€ Mini-quiz</h3>
          <p style="margin:0 0 12px; color:var(--muted); font-size:14px">
            Eerlijk antwoorden: wie is het schattigst?
          </p>
          <div class="bigbtns">
            <button class="btn btn-primary" id="btnHer">Zij ğŸ˜‡</button>
            <button class="btn btn-soft" id="btnMe">Ikâ€¦ ğŸ™ƒ</button>
          </div>
          <p class="smallnote" id="quizResult" style="margin-top:10px"></p>
        </div>

        <div class="card">
          <h3 style="margin:0 0 8px">ğŸ“¸ Herinnering</h3>
          <p style="margin:0 0 12px; color:var(--muted); font-size:14px">
            Zet hier een foto van jullie samen.
          </p>
          <div style="
            aspect-ratio: 16/10;
            border-radius: 16px;
            border: 1px dashed rgba(255,255,255,0.20);
            background: rgba(0,0,0,0.18);
            display:grid; place-items:center;
            color: rgba(255,255,255,0.75);
            font-weight:800;
            padding: 10px;
            text-align:center;
          ">
            Vervang <code style="opacity:.9">images/us.jpg</code> door jullie foto ğŸ’
          </div>
        </div>

        <div class="card" id="vraag">
          <h3 style="margin:0 0 8px">ğŸ’ De vraag</h3>
          <p style="margin:0 0 12px; color:var(--muted); font-size:14px">
            Wil je mijn Valentijn zijn?
          </p>
          <div class="bigbtns" style="position:relative">
            <button class="btn btn-primary" id="btnYes">JA!! ğŸ’˜</button>
            <button class="btn btn-soft" id="btnNo">Nee ğŸ™ˆ</button>
          </div>
          <p class="smallnote" id="noMsg"></p>
        </div>
      </div>
    </div>

    <div class="footer">
      Gemaakt met â¤ï¸ â€” en een beetje chaos.
      <div class="smallnote">Â© <span id="year"></span> â€¢ Jij bent mijn favoriete tabblad.</div>
    </div>
  </div>

  <!-- Hidden photo: just drop a file in /images/us.jpg if you want -->
  <img src="images/us.jpg" alt="" style="display:none" onerror="/* ignore */"/>

  <div class="modal" id="modal">
    <div class="modalbox">
      <button class="close" id="btnClose">âœ•</button>
      <h2>ğŸ“© Geheime brief</h2>
      <p id="letter">
        Lieve jij,<br><br>
        Ik ben zo blij dat jij in mijn leven bent. Met jou is alles lichter, leuker en gewoonâ€¦ beter.
        Dankjewel dat je bent wie je bent. â¤ï¸<br><br>
        P.S. Ik heb een surprise voor je. (Hint: het is een date met mij.)<br><br>
        <strong>Ik hou van je.</strong>
      </p>
      <div class="bigbtns">
        <button class="btn btn-primary" id="btnCopy">ğŸ“‹ Kopieer tekst</button>
        <button class="btn btn-soft" id="btnSparkle">âœ¨ Meer magie</button>
      </div>
    </div>
  </div>

  <script>
    // ======= Quick personalisation =======
    const GIRLFRIEND_NAME = "mijn liefste"; // <-- wijzig dit (bv. "Sofie")
    const YOUR_NAME = "Maxim";              // <-- wijzig dit
    const SCORE_GOAL = 7;                  // <-- doelpunten

    document.getElementById("naam").textContent = GIRLFRIEND_NAME;
    document.getElementById("year").textContent = new Date().getFullYear();
    document.getElementById("goal").textContent = SCORE_GOAL;

    // ======= Floating hearts generator =======
    const hearts = document.getElementById("hearts");
    const heartCount = 26;
    for (let i=0;i<heartCount;i++){
      const h = document.createElement("div");
      h.className = "heart";
      const left = Math.random()*100;
      const dur = 6 + Math.random()*10;
      const delay = -Math.random()*dur;
      const size = 10 + Math.random()*16;
      h.style.left = left + "vw";
      h.style.animationDuration = dur + "s";
      h.style.animationDelay = delay + "s";
      h.style.opacity = (0.12 + Math.random()*0.22).toFixed(2);
      h.style.width = size+"px";
      h.style.height = size+"px";
      // match pseudo sizes
      h.style.setProperty("--s", size);
      hearts.appendChild(h);

      // tweak pseudo via scale (simple approach)
      h.style.transform = `translateY(${110 + Math.random()*20}vh) rotate(45deg) scale(${size/14})`;
    }

    // ======= Modal =======
    const modal = document.getElementById("modal");
    document.getElementById("btnOpen").onclick = () => modal.classList.add("open");
    document.getElementById("btnClose").onclick = () => modal.classList.remove("open");
    modal.addEventListener("click", (e)=> { if(e.target === modal) modal.classList.remove("open"); });

    // ======= Toast =======
    const toast = document.getElementById("toast");
    let toastT;
    function showToast(text){
      toast.textContent = text;
      toast.classList.add("show");
      clearTimeout(toastT);
      toastT = setTimeout(()=> toast.classList.remove("show"), 1400);
    }

    // ======= Compliments =======
    const compliments = [
      "Jij bent letterlijk mijn favoriete mens ğŸ’—",
      "Jij maakt gewone dagen bijzonder âœ¨",
      "Ik krijg nog steeds vlinders van jou ğŸ¦‹",
      "Je lach is mijn zwakke plek ğŸ˜Œ",
      "Samen met jou voelt alles juist â¤ï¸"
    ];
    document.getElementById("btnCompliment").onclick = () => {
      showToast(compliments[Math.floor(Math.random()*compliments.length)]);
    };

    // ======= Date score list =======
    let score = 0;
    const scoreEl = document.getElementById("score");
    const items = [...document.querySelectorAll("#dateList .li")];

    items.forEach(li => {
      li.addEventListener("click", ()=>{
        const pts = Number(li.dataset.points || 0);
        if(li.dataset.active === "1") return; // already counted
        li.dataset.active = "1";
        li.style.background = "linear-gradient(135deg, rgba(255,77,141,0.22), rgba(124,77,255,0.14))";
        li.style.borderColor = "rgba(255,255,255,0.18)";
        score += pts;
        scoreEl.textContent = score;
        showToast("+" + pts + " â­");
        if(score >= SCORE_GOAL) party();
      });
    });

    document.getElementById("btnReset").onclick = ()=>{
      score = 0; scoreEl.textContent = score;
      items.forEach(li=>{
        li.dataset.active = "0";
        li.style.background = "rgba(0,0,0,0.16)";
        li.style.borderColor = "rgba(255,255,255,0.10)";
      });
      showToast("Reset ğŸ’«");
    };

    document.getElementById("btnLock").onclick = ()=>{
      if(score === 0) return showToast("Kies eerst iets ğŸ˜„");
      showToast("Plan vastgelegd ğŸ”’");
    };

    // ======= Quiz =======
    const quizResult = document.getElementById("quizResult");
    document.getElementById("btnHer").onclick = ()=>{
      quizResult.textContent = "Correct. Altijd correct. âœ…ğŸ’–";
      party();
    };
    document.getElementById("btnMe").onclick = ()=>{
      quizResult.textContent = "Sterke poging ğŸ˜Œ Maarâ€¦ nee. â¤ï¸";
      showToast("ğŸ™ƒ");
    };

    // ======= The question (yes/no) =======
    const btnNo = document.getElementById("btnNo");
    const noMsg = document.getElementById("noMsg");
    const noLines = [
      "Nice try ğŸ˜„",
      "Deze knop werkt niet vandaag ğŸ™ˆ",
      "Dat kan ik niet accepteren ğŸ˜Œ",
      "Plot twist: toch JA ğŸ’˜",
      "Ik ga even doen alsof ik dat niet zag ğŸ˜‡"
    ];
    btnNo.addEventListener("mouseover", dodge);
    btnNo.addEventListener("click", ()=>{
      noMsg.textContent = noLines[Math.floor(Math.random()*noLines.length)];
      dodge();
    });

    function dodge(){
      const parent = btnNo.parentElement;
      const rect = parent.getBoundingClientRect();
      const bx = Math.random() * Math.max(0, rect.width - btnNo.offsetWidth);
      const by = Math.random() * Math.max(0, rect.height - btnNo.offsetHeight);
      btnNo.style.position = "relative";
      btnNo.style.left = (bx - rect.width/4) + "px";
      btnNo.style.top = (by - rect.height/4) + "px";
    }

    document.getElementById("btnYes").onclick = ()=>{
      party(true);
      showToast("YAAAAY ğŸ’˜");
      // personal message in modal
      const letter = document.getElementById("letter");
      letter.innerHTML =
        `Lieve ${GIRLFRIEND_NAME},<br><br>
        YESSS! ğŸ¥¹ğŸ’–<br>
        Ik kies jou. Vandaag, morgen, en alle dagen daarna.<br><br>
        <strong>â€” ${YOUR_NAME}</strong>`;
      modal.classList.add("open");
    };

    // ======= Copy letter =======
    document.getElementById("btnCopy").onclick = async ()=>{
      const text = document.getElementById("letter").innerText;
      try{
        await navigator.clipboard.writeText(text);
        showToast("Gekopieerd ğŸ“‹");
      }catch{
        showToast("Copy lukt niet ğŸ˜…");
      }
    };

    document.getElementById("btnSparkle").onclick = ()=> party();

    // ======= Confetti (simple canvas) =======
    const canvas = document.getElementById("confetti");
    const ctx = canvas.getContext("2d");
    let confetti = [];
    let anim;

    function resize(){
      canvas.width = window.innerWidth * devicePixelRatio;
      canvas.height = window.innerHeight * devicePixelRatio;
      ctx.scale(devicePixelRatio, devicePixelRatio);
    }
    window.addEventListener("resize", ()=> {
      // reset scale safely
      ctx.setTransform(1,0,0,1,0,0);
      resize();
    });
    resize();

    function party(big=false){
      canvas.classList.add("show");
      const count = big ? 220 : 120;

      for(let i=0;i<count;i++){
        confetti.push({
          x: Math.random()*window.innerWidth,
          y: -20 - Math.random()*window.innerHeight*0.3,
          r: 2 + Math.random()*4,
          vx: -1.6 + Math.random()*3.2,
          vy: 2 + Math.random()*4.8,
          a: Math.random()*Math.PI*2,
          va: -0.2 + Math.random()*0.4,
          life: 120 + Math.random()*80
        });
      }
      cancelAnimationFrame(anim);
      tick();
      setTimeout(()=> {
        canvas.classList.remove("show");
        confetti = [];
      }, big ? 2200 : 1400);
    }

    function tick(){
      anim = requestAnimationFrame(tick);
      ctx.clearRect(0,0,window.innerWidth, window.innerHeight);

      confetti.forEach(p=>{
        p.x += p.vx;
        p.y += p.vy;
        p.a += p.va;
        p.life -= 1;

        ctx.save();
        ctx.translate(p.x, p.y);
        ctx.rotate(p.a);
        ctx.globalAlpha = Math.max(0, Math.min(1, p.life/120));
        // no fixed colors requested: use random-ish but consistent palette via HSL
        ctx.fillStyle = `hsl(${(p.x+p.y)%360} 90% 70%)`;
        ctx.fillRect(-p.r, -p.r, p.r*2.2, p.r*1.6);
        ctx.restore();
      });

      confetti = confetti.filter(p => p.life > 0 && p.y < window.innerHeight + 60);
      if(confetti.length === 0) cancelAnimationFrame(anim);
    }
  </script>
</body>
</html>
